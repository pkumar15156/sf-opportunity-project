<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:file="http://www.mulesoft.org/schema/mule/file"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="us-cloud-sub-flow" doc:id="219ac40b-a39f-4508-8d8f-7939e795e1d0" >
		<logger level="INFO" doc:name="start-log" doc:id="98b3070a-260c-4efc-8bfd-eecce2804066" />
		<logger level="INFO" doc:name="end-log" doc:id="ecf6a352-d4eb-4501-b568-b8d0f6a02dc2" />
	</sub-flow>
	<sub-flow name="datapipe-sub-flow" doc:id="3c42f05f-4da6-427b-af22-1b5b8895fe40" >
		<logger level="INFO" doc:name="start-log" doc:id="680271dc-45fb-489d-ba74-9a5e28e2a56c" />
		<file:read doc:name="read-lookup-file" doc:id="1c344791-d895-4837-aad1-f9ec7580b654" config-ref="File_Config" path="C:\Users\pkumar\IMPORTANT AND ADVANCED TOPICS\SF\lookup\DPTransactionInfo.csv"/>
		<ee:transform doc:name="convert-payload" doc:id="fb0c752e-f7e6-4130-a641-f872322fff76" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
flatten(vars.accountNumber map ((item, index) -> payload[?($.PartnerAccountId == item)])) 	]]></ee:set-payload>
			</ee:message>
		</ee:transform>
		<ee:transform doc:name="TXSTA-file-payload" doc:id="43583e26-59e5-4f90-817b-cf59a359ef07" >
			<ee:message >
			</ee:message>
			<ee:variables >
				<ee:set-variable variableName="TXSTA" ><![CDATA[%dw 2.0
output application/json
---
payload map{
	"ORDERID": vars.val."Line Item Number",
	"LINENUMBER": 1,
	"SUBLINENUMBER": 1,
	"EVENTTYPEID": vars.val."Transaction Type",
	"ACCOUNTINGDATE": "",
	"PRODUCTID": "",
	"PRODUCTNAME": "",
	"PRODUCTDESCRIPTION": "",
	"UNITTYPEFORVALUE 2"  : "GC",
	"NUMBEROFUNITS": "",
	"UNITVALUE": "",
	"UNITTYPEFORUNITVALUE 2": "",
	"COMPENSATIONDATE": vars.val."Invoice Date",
	"ALTERNATEORDERNUMBER": vars.val."Invoice Number",
	"DATASOURCE": "",
	"NATIVECURRENCY": vars.val."Currency Code",
	"NATIVECURRENCYAMOUNT": vars.val.Amount,
	"DISCOUNTPERCENT": "",
	"DISCOUNTTYPE": "",
	"BILLTOCUSTID": "",
	"BILLTOCONTACT": "",
	"BILLTOCOMPANY": "",
	"BILLTOAREACODE": "",
	"BILLTOPHONE": "",
	"BILLTOFAX": "",
	"BILLTOADDRESS1": "",
	"BILLTOADDRESS2": "",
	"BILLTOADDRESS3": "",
	"BILLTOCITY": "",
	"BILLTOSTATE": "",
	"BILLTOCOUNTRY": "",
	"BILLTOPOSTALCODE": "",
	"BILLTOINDUSTRY": "",
	"BILLTOGEOGRAPHY": "",
	"SHIPTOCUSTID": "",
	"SHIPTOCONTACT": "",
	"SHIPTOCOMPANY": "",
	"SHIPTOAREACODE": "",
	"SHIPTOPHONE": "",
	"SHIPTOFAX": "",
	"SHIPTOADDRESS1": "",
	"SHIPTOADDRESS2": "",
	"SHIPTOADDRESS3": "",
	"SHIPTOCITY": "",
	"SHIPTOSTATE": "",
	"SHIPTOCOUNTRY": "",
	"SHIPTOPOSTALCODE": "",
	"SHIPTOINDUSTRY": "",
	"SHIPTOGEOGRAPHY": "",
	"OTHERTOCUSTID": "",
	"OTHERTOCONTACT": "",
	"OTHERTOCOMPANY": "",
	"OTHERTOAREACODE": "",
	"OTHERTOPHONE": "",
	"OTHERTOFAX": "",
	"OTHERTOADDRESS1": "",
	"OTHERTOADDRESS2": "",
	"OTHERTOADDRESS3": "",
	"OTHERTOCITY": "",
	"OTHERTOSTATE": "",
	"OTHERTOCOUNTRY": "",
	"OTHERTOPOSTALCODE": "",
	"OTHERTOINDUSTRY": "",
	"OTHERTOGEOGRAPHY": "",
	"REASONID": "",
	"COMMENTS": "",
	"GENERICATTRIBUTE3": vars.val."Device Number",
	"GENERICATTRIBUTE4": payload.FinalOpportunityType[0],
	"GENERICATTRIBUTE5": payload.PartnerType[0],
	"GENERICATTRIBUTE6": payload.PartnerAccountName[0],
	"GENERICATTRIBUTE7": payload.OpportunityCategory[0],
	"GENERICATTRIBUTE8": "",
	"GENERICATTRIBUTE9": payload.PartnerAccountOwner[0],
	"GENERICATTRIBUTE10": payload.PartnerAccountOwnerRole[0],
	"GENERICATTRIBUTE11": payload.PartnerContractType[0],
	"GENERICATTRIBUTE12": payload.CommissionRole[0],
	"GENERICATTRIBUTE13": payload.OracleVendorId[0],
	"GENERICATTRIBUTE14": "",
	"GENERICATTRIBUTE21": vars.val."Invoice Source",
	"GENERICATTRIBUTE22": vars.val."Product Group",
	"GENERICATTRIBUTE23": vars.val."Product Type",
	"GENERICATTRIBUTE24": vars.val."Product Type Charge Type",
	"GENERICATTRIBUTE25": payload.PartnerAccountId[0],
	"GENERICATTRIBUTE27": payload.PartnerAccountType[0],
	"GENERICATTRIBUTE28": payload.PartnerAccountSubType[0],
	"GENERICATTRIBUTE31": vars.val."Account Key",
	"UNITTYPEFORGENERICNUMBER4": "",
	"GENERICNUMBER5": "",
	"UNITTYPEFORGENERICNUMBER5": "",
	"GENERICNUMBER6": "",
	"UNITTYPEFORGENERICNUMBER6": "",
	"GENERICDATE1": payload.CloseDate[0],
	"GENERICDATE4": vars.val."Contract End Date",
	"GENERICDATE6": "",
	"GENERICBOOLEAN1": "",
	"GENERICBOOLEAN2": "",
	"GENERICBOOLEAN3": "",
	"GENERICBOOLEAN4": "",
	"GENERICBOOLEAN5": "",
	"GENERICBOOLEAN6": ""
	}]]></ee:set-variable>
			</ee:variables>
		</ee:transform>
		<ee:transform doc:name="TXTA-file-payload" doc:id="63f17193-2db7-475a-95fd-2373c1455485" >
			<ee:message >
			</ee:message>
			<ee:variables >
				<ee:set-variable variableName="TXTA" ><![CDATA[%dw 2.0
output application/json
---
payload map{
	"ORDERID": vars.val."Line Item Number",
	"LINENUMBER": 1,
	"SUBLINENUMBER": 1,
	"EVENTTYPEID": vars.val."Transaction Type",
    "PAYEEID": payload.ParticipantID[0],
    "PAYEETYPE": "Participant",
    "POSITIONNAME": "",
    "TITLENAME": "",
    "GENERICATTRIBUTE1": "",
    "GENERICATTRIBUTE2": "",
    "GENERICATTRIBUTE3": "",
    "GENERICATTRIBUTE4": "",
    "GENERICATTRIBUTE5": "",
    "GENERICATTRIBUTE6": "",
    "GENERICATTRIBUTE7": "",
    "GENERICATTRIBUTE8": "",
    "GENERICATTRIBUTE9": "",
    "GENERICATTRIBUTE10": "",
    "GENERICATTRIBUTE11": "",
    "GENERICATTRIBUTE12": "",
    "GENERICATTRIBUTE13": "",
    "GENERICATTRIBUTE14": "",
    "GENERICATTRIBUTE15": "",
    "GENERICATTRIBUTE16": "",
    "GENERICNUMBER1": "",
    "UNITTYPEFORGENERICNUMBER1": "",
    "GENERICNUMBER2": "",
    "UNITTYPEFORGENERICNUMBER2": "",
    "GENERICNUMBER3": "",
    "UNITTYPEFORGENERICNUMBER3": "",
    "GENERICNUMBER4": "",
    "UNITTYPEFORGENERICNUMBER4": "",
    "GENERICNUMBER5": "",
    "UNITTYPEFORGENERICNUMBER5": "",
    "GENERICNUMBER6": "",
    "UNITTYPEFORGENERICNUMBER6": "",
    "GENERICDATE1": "",
    "GENERICDATE2": "",
    "GENERICDATE3": "",
    "GENERICDATE4": "",
    "GENERICDATE5": "",
    "GENERICDATE6": "",
    "GENERICBOOLEAN1": "",
    "GENERICBOOLEAN2": "",
    "GENERICBOOLEAN3": "",
    "GENERICBOOLEAN4": "",
    "GENERICBOOLEAN5": "",
    "GENERICBOOLEAN6": ""
}]]></ee:set-variable>
			</ee:variables>
		</ee:transform>
		<logger level="INFO" doc:name="end-log" doc:id="d53e62ca-5429-4574-a0e2-4b52ac318d17" />
	</sub-flow>
</mule>
